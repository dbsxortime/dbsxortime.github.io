<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>wordle!</title>
<style>
	*{
		margin:0;
		padding:0;
		text-align:center;
	}
	.paper{
		margin:auto;
		border:1px solid #666;
		width:330px;
		height:600px;
	}
	.board{
		width:320px;
		margin:auto;
		margin-top:20px;
	}
	.input_text{
		width:50px;
		height:50px;
		font-size:40px;
		background-color:#fff;
		border-radius:3px;
		margin : 5px 5px;
		text-align:center;
	}
	.btn_submit{
		width:330px;
		height:50px;
		background-color:red;
		text-align:center;
		line-height:54px;
		margin:auto;
		border:1px solid black;
	}
</style>
<script>
	var idx=1;
	var arr = ['ACTOR','ABOVE','ADMIN','AVOID','BASIC','BEACH','BEGIN','BELOW','BENCH','BLACK','BLIND','BRAIN','BREAK','BRING','BROWN','BUILD'];
	var ans = '';
	
	window.onload=function(){
		makeRow();
		ans = arr[randomNum(0,arr.length-1)];
		document.getElementById(11).focus();
	}
	
	function randomNum(min, max){
		var randNum = Math.floor(Math.random()*(max-min+1)) + min;
		return randNum;
	}
	
	function makeRow(){
		var input = 
			'<div>'+
			'<input id="'+idx+'1" type="text" class="input_text now_input" maxlength="1" onkeyup="checkInput(this.value,'+idx+',1);"/>'+
			'<input id="'+idx+'2" type="text" class="input_text now_input" maxlength="1" onkeyup="checkInput(this.value,'+idx+',2);"/>'+
			'<input id="'+idx+'3" type="text" class="input_text now_input" maxlength="1" onkeyup="checkInput(this.value,'+idx+',3);"/>'+
			'<input id="'+idx+'4" type="text" class="input_text now_input" maxlength="1" onkeyup="checkInput(this.value,'+idx+',4);"/>'+
			'<input id="'+idx+'5" type="text" class="input_text now_input" maxlength="1" onkeyup="checkInput(this.value,'+idx+',5);"/>'+
			'</div>';
		document.getElementById('board').insertAdjacentHTML('beforeend',input);
		var id = idx + '1';
		document.getElementById(id).focus();
		
		idx++;
	}
	
	function submit(){
		var input = document.querySelectorAll('.now_input');
		
		//공백검사
		for(var i=0; i<5; i++){
			if(input[i].value==''){
			input[i].focus();
				return;
			}
		}
		
		//입력데이터 검사
		var ansCnt =0;
		for(var i=0; i<5; i++){
			if(input[i].value == ans[i]){
				input[i].style.background = 'green';
				ansCnt ++;
			}else if(ans.includes(input[i].value)){
				input[i].style.background = 'yellow';
			}else {
				input[i].style.background = 'lightgrey';
			}
			input[i].classList.remove('now_input');
			input[i].readOnly = true;
		}
		
		if(ansCnt == 5) {
			alert(idx-1 + '번 째 정답. 엔터를 눌러 초기화'); 
			location.href = location.href;
			return;
		}
		
		if(idx>6){
			alert('실패! 정답 : ' + ans);
			location.href = location.href;
			return;
		}
		
		makeRow();
		for(var i=0; i<5; i++){
			input[i].classList.remove('now_input');
			input[i].readOnly = true;
		}
	}
	
	function checkInput(value,index,num){
		alert(event.keyCode);
		if(num == 5 && event.keyCode == '13' && value !=''){
			submit();
			return;
		}
		
		if(event.keyCode == 16){
			return;
		}
		
		if(event.keyCode == 8){
			var prevId = index + (num-1).toString();
			document.getElementById(prevId).focus();
			document.getElementById(prevId).value = '';
		}
		
		var val = String.fromCharCode(event.keyCode);
		
		var id = index + (num.toString());
		var nextId = index + (num+1).toString();
		
		document.getElementById(id).value = val;

		if(val == '') return;
		if(num == 5) return;

		if(value.length == 1){
			document.getElementById(nextId).focus();
		}
		
		
	}
</script>
</head>
<body>
<div class="paper">
	<div class="board" id="board">
	</div>
</div>
</body>
</html>